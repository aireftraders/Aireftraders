<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI REF-TRADERS Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
    <!-- Add Telegram WebApp JS -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Load authentication scripts first -->
    <script src="js/telegram-auth.js"></script>
    <script>
        // Add debug log function
        function debugLog(message) {
            console.log(`[Dashboard] ${message}`);
        }
        
        debugLog('Dashboard page loading');
        
        // Check if we're coming from splash
        const fromSplash = sessionStorage.getItem("fromSplash") === "true";
        if (fromSplash) {
            debugLog('Coming from splash screen');
            sessionStorage.removeItem("fromSplash");
        }
        
        // Force clear any redirect blockers
        if (window.TelegramAuth && window.TelegramAuth.isAuthenticated()) {
            debugLog('User is authenticated');
        } else {
            debugLog('User is NOT authenticated, will be redirected');
        }
    </script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <img src="https://hebbkx1anhila5yf.public.blob.vercel-storage.com/ChatGPT%20Image%20Apr%2030%2C%202025%2C%2002_36_32%20AM-1wDDnne5fpylqjmbzveVpRiAKxNNkS.png" alt="AI REF-TRADERS Logo" class="logo-img">
                <h1>AI REF-TRADERS</h1>
            </div>
            <div class="header-controls">
                <button id="themeToggle" class="theme-toggle">
                    <span id="themeIcon">üåô</span>
                    <span id="themeText" class="theme-text">Dark Mode</span>
                </button>
                <div class="language-dropdown-container">
                    <select id="languageDropdown" class="language-dropdown">
                        <option value="en">üá¨üáß English</option>
                        <option value="ng">üá≥üá¨ Nigerian</option>
                        <option value="fr">üá´üá∑ French</option>
                        <option value="es">üá™üá∏ Spanish</option>
                    </select>
                </div>
            </div>
        </header>

        <!-- Main content with tabs -->
        <main class="main-content">
            <div class="tabs">
                <button class="tab active" data-tab="dashboard">Dashboard</button>
                <button class="tab" data-tab="trading">Trading</button>
                <button class="tab" data-tab="referral">Referral</button>
                <button class="tab" data-tab="profile">Profile</button>
            </div>

            <!-- Dashboard Tab -->
            <div id="dashboardTab" class="tab-content active">
                <div class="dashboard-grid">
                    <!-- Balance Card -->
                    <div class="dashboard-card balance-card">
                        <h3>Account Balance</h3>
                        <div class="balance-amount">‚Ç¶<span id="balanceDisplay">5,000</span></div>
                        <div class="balance-actions">
                            <button class="action-button deposit-btn">
                                <span class="action-icon">‚¨ÜÔ∏è</span>
                                Deposit
                            </button>
                            <button class="action-button withdraw-btn">
                                <span class="action-icon">‚¨áÔ∏è</span>
                                Withdraw
                            </button>
                        </div>
                    </div>

                    <!-- Stats Card -->
                    <div class="dashboard-card stats-card">
                        <h3>Your Stats</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <div class="stat-value">12</div>
                                <div class="stat-label">Active Trades</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">8</div>
                                <div class="stat-label">Referrals</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">‚Ç¶2,500</div>
                                <div class="stat-label">Profit</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-value">3</div>
                                <div class="stat-label">Days Active</div>
                            </div>
                        </div>
                    </div>

                    <!-- Recent Activity Card -->
                    <div class="dashboard-card activity-card">
                        <h3>Recent Activity</h3>
                        <ul class="activity-list">
                            <li class="activity-item">
                                <div class="activity-icon trade">üîÑ</div>
                                <div class="activity-details">
                                    <div class="activity-title">Trade Completed</div>
                                    <div class="activity-description">AI-assisted trade on USDT/NGN</div>
                                    <div class="activity-time">Today, 10:45 AM</div>
                                </div>
                                <div class="activity-amount profit">+‚Ç¶500</div>
                            </li>
                            <li class="activity-item">
                                <div class="activity-icon referral">üë•</div>
                                <div class="activity-details">
                                    <div class="activity-title">Referral Bonus</div>
                                    <div class="activity-description">User @john_doe joined</div>
                                    <div class="activity-time">Yesterday, 3:30 PM</div>
                                </div>
                                <div class="activity-amount profit">+‚Ç¶200</div>
                            </li>
                            <li class="activity-item">
                                <div class="activity-icon deposit">‚¨ÜÔ∏è</div>
                                <div class="activity-details">
                                    <div class="activity-title">Account Deposit</div>
                                    <div class="activity-description">Via Bank Transfer</div>
                                    <div class="activity-time">Apr 28, 9:15 AM</div>
                                </div>
                                <div class="activity-amount">‚Ç¶1,000</div>
                            </li>
                        </ul>
                        <button class="view-all-btn">View All Activities</button>
                    </div>

                    <!-- Quick Actions Card -->
                    <div class="dashboard-card quick-actions-card">
                        <h3>Quick Actions</h3>
                        <div class="quick-actions-grid">
                            <button class="quick-action-btn">
                                <span class="quick-action-icon">ü§ñ</span>
                                <span class="quick-action-text">AI Trade</span>
                            </button>
                            <button class="quick-action-btn">
                                <span class="quick-action-icon">üìä</span>
                                <span class="quick-action-text">Market</span>
                            </button>
                            <button class="quick-action-btn">
                                <span class="quick-action-icon">üë•</span>
                                <span class="quick-action-text">Refer</span>
                            </button>
                            <button class="quick-action-btn">
                                <span class="quick-action-icon">üí≥</span>
                                <span class="quick-action-text">Funding</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Testimonials Section -->
                <div class="testimonials-section">
                    <h3>Success Stories</h3>
                    <div class="testimonials-container">
                        <div class="testimonial active" data-testimonial="1">
                            <div class="testimonial-text">
                                "The AI trading suggestions helped me make consistent profits even as a beginner. Highly recommended!"
                            </div>
                            <div class="testimonial-author">- Chioma O., Lagos</div>
                        </div>
                        <div class="testimonial" data-testimonial="2">
                            <div class="testimonial-text">
                                "I've referred 15 friends and earned over ‚Ç¶15,000 in bonuses. The referral system is simple and rewarding!"
                            </div>
                            <div class="testimonial-author">- Emeka K., Abuja</div>
                        </div>
                        <div class="testimonial" data-testimonial="3">
                            <div class="testimonial-text">
                                "The platform is easy to use and the AI recommendations are spot on. I've increased my trading capital by 30%!"
                            </div>
                            <div class="testimonial-author">- Funmi A., Port Harcourt</div>
                        </div>
                    </div>
                    <div class="testimonial-dots">
                        <span class="dot active" data-dot="1"></span>
                        <span class="dot" data-dot="2"></span>
                        <span class="dot" data-dot="3"></span>
                    </div>
                </div>
            </div>

            <!-- Trading Tab (placeholder) -->
            <div id="tradingTab" class="tab-content">
                <div class="placeholder-content">
                    <h2>Trading Features Coming Soon</h2>
                    <p>Our AI-powered trading platform is under development. Stay tuned!</p>
                </div>
            </div>

            <!-- Referral Tab (placeholder) -->
            <div id="referralTab" class="tab-content">
                <div class="referral-content">
                    <div class="referral-card">
                        <h3>Your Referral Link</h3>
                        <div class="referral-link-container">
                            <input type="text" readonly value="https://airef-traders.ng/?ref=user12345" id="referralLink" class="referral-link-input">
                            <button class="copy-link-btn" id="copyLinkBtn">Copy</button>
                        </div>
                        <div class="referral-share">
                            <p>Share via:</p>
                            <div class="share-buttons">
                                <button class="share-btn whatsapp">
                                    <span class="share-icon">üì±</span>
                                    WhatsApp
                                </button>
                                <button class="share-btn telegram">
                                    <span class="share-icon">‚úàÔ∏è</span>
                                    Telegram
                                </button>
                                <button class="share-btn twitter">
                                    <span class="share-icon">üê¶</span>
                                    Twitter
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="referral-stats-card">
                        <h3>Referral Stats</h3>
                        <div class="referral-stats-grid">
                            <div class="referral-stat">
                                <div class="stat-value">8</div>
                                <div class="stat-label">Total Referrals</div>
                            </div>
                            <div class="referral-stat">
                                <div class="stat-value">5</div>
                                <div class="stat-label">Active Users</div>
                            </div>
                            <div class="referral-stat">
                                <div class="stat-value">‚Ç¶1,600</div>
                                <div class="stat-label">Total Earnings</div>
                            </div>
                        </div>
                    </div>

                    <div class="referral-benefits">
                        <h3>Referral Benefits</h3>
                        <div id="referralTextRotator" class="referral-benefit-text">
                            Earn 10% commission on all trading fees from your referrals
                        </div>
                        <div class="referral-benefits-list">
                            <div class="benefit-item">
                                <div class="benefit-icon">üí∞</div>
                                <div class="benefit-text">10% commission on trading fees</div>
                            </div>
                            <div class="benefit-item">
                                <div class="benefit-icon">üîÑ</div>
                                <div class="benefit-text">Lifetime referral earnings</div>
                            </div>
                            <div class="benefit-item">
                                <div class="benefit-icon">üéÅ</div>
                                <div class="benefit-text">Bonus rewards for active referrals</div>
                            </div>
                            <div class="benefit-item">
                                <div class="benefit-icon">üìà</div>
                                <div class="benefit-text">Special promotions for top referrers</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Tab (placeholder) -->
            <div id="profileTab" class="tab-content">
                <div class="placeholder-content">
                    <h2>User Profile</h2>
                    <p>Your profile settings and information will appear here.</p>
                    <button id="logoutBtn" class="logout-btn">Logout</button>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>&copy; 2023 AI REF-TRADERS | Nigeria's #1 AI Trading & Referral Platform</p>
        </footer>
    </div>

    <!-- Load auth check and app initialization scripts -->
    <script src="js/auth-check.js"></script>
    <script src="js/app-init.js"></script>
</body>
</html>
