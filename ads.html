<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Complete Ads to Continue</title>
  <style>
    :root {
      --primary: #4a6bff;
      --secondary: #f5f7ff;
      --text: #333;
      --light-text: #777;
      --box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background-color: var(--secondary);
      color: var(--text);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .ad-container {
      background: white;
      border-radius: 10px;
      box-shadow: var(--box-shadow);
      padding: 2rem;
      max-width: 800px;
      width: 90%;
      margin: 2rem auto;
      text-align: center;
    }

    .ad-header {
      margin-bottom: 1.5rem;
    }

    .ad-header h2 {
      color: var(--primary);
      margin-bottom: 0.5rem;
    }

    .ad-header p {
      color: var(--light-text);
    }

    .ad-status {
      display: flex;
      justify-content: space-between;
      margin-bottom: 1.5rem;
      font-weight: 500;
    }

    .progress-container {
      display: flex;
      justify-content: space-between;
      margin-bottom: 2rem;
      position: relative;
      overflow-x: auto;
      padding-bottom: 10px;
    }

    .progress-container::before {
      content: '';
      position: absolute;
      top: 50%;
      left: 0;
      right: 0;
      height: 4px;
      background: #e0e0e0;
      transform: translateY(-50%);
      z-index: 1;
    }

    .progress-step {
      width: 30px;
      height: 30px;
      border-radius: 50%;
      background: #e0e0e0;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      color: #999;
      position: relative;
      z-index: 2;
      flex-shrink: 0;
      margin: 0 2px;
    }

    .progress-step.completed {
      background: var(--primary);
      color: white;
    }

    .progress-step.active {
      background: var(--primary);
      color: white;
      border: 3px solid #b3c2ff;
    }

    #adFrameContainer {
      width: 100%;
      min-height: 250px;
      margin-bottom: 1.5rem;
      background: #f0f0f0;
      border-radius: 8px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    #timerDisplay {
      margin-bottom: 1.5rem;
      font-size: 1.1rem;
      font-weight: 500;
    }

    .watch-ad-btn {
      background: var(--primary);
      color: white;
      border: none;
      padding: 0.8rem 2rem;
      border-radius: 5px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .watch-ad-btn:hover {
      background: #3a56d4;
      transform: translateY(-2px);
    }

    .watch-ad-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
    }

    .ad-complete-message {
      display: none;
      margin-top: 1.5rem;
      padding: 1rem;
      background: #e8f5e9;
      color: #2e7d32;
      border-radius: 5px;
      font-weight: 500;
    }

    nav {
      width: 100%;
      background: var(--primary);
      padding: 1rem;
      text-align: center;
      box-shadow: var(--box-shadow);
    }

    nav a {
      color: white;
      text-decoration: none;
      font-size: 1.2rem;
      font-weight: 600;
    }

    /* Responsive adjustments */
    @media (max-width: 600px) {
      .progress-step {
        width: 25px;
        height: 25px;
        font-size: 0.8rem;
      }
      
      .ad-container {
        padding: 1.5rem;
      }
    }
  </style>
</head>
<body>

  <nav>
    <a href="index.html">Dashboard</a>
  </nav>

  <div class="ad-container" id="mainContainer">
    <div class="ad-header">
      <h2>Complete Ads to Continue</h2>
      <p id="adPurpose">Watch 20 ads to unlock access</p>
    </div>

    <div class="ad-status">
      <span>Progress: <span id="completedCount">0</span>/<span id="totalAdsDisplay">20</span></span>
      <span>Estimated time: <span id="estimatedTime">5 minutes</span></span>
    </div>

    <div class="progress-container" id="progressSteps"></div>

    <div id="adFrameContainer">
      <div id="adPlaceholder" style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#666;">
        <p>Ad will load when you click "Watch Ad"</p>
      </div>
      <div id="adContent"></div>
    </div>

    <div id="timerDisplay">Ad completes in <span id="timerCount">30</span> seconds</div>

    <button class="watch-ad-btn" id="watchAdBtn">Watch Ad (1/20)</button>
    
    <div id="adCompleteMessage" class="ad-complete-message">
      All 20 ads completed! You can now continue to your destination.
    </div>
  </div>

  <script>
    // Configuration
    const totalAds = 20;
    const adDuration = 30; // Increased to 30 seconds for better ad viewing
    let currentAd = 0;
    let timer;
    let secondsRemaining = adDuration;
    let isAdRunning = false;

    // DOM elements
    const watchAdBtn = document.getElementById("watchAdBtn");
    const timerDisplay = document.getElementById("timerCount");
    const completedCount = document.getElementById("completedCount");
    const totalAdsDisplay = document.getElementById("totalAdsDisplay");
    const progressSteps = document.getElementById("progressSteps");
    const adCompleteMessage = document.getElementById("adCompleteMessage");
    const estimatedTime = document.getElementById("estimatedTime");
    const adPurpose = document.getElementById("adPurpose");
    const adPlaceholder = document.getElementById("adPlaceholder");
    const adContent = document.getElementById("adContent");

    // Initialize
    totalAdsDisplay.textContent = totalAds;
    adPurpose.textContent = `Watch ${totalAds} ads to unlock access`;
    updateEstimatedTime();
    createProgressSteps();

    function createProgressSteps() {
      progressSteps.innerHTML = '';
      for (let i = 0; i < totalAds; i++) {
        const step = document.createElement("div");
        step.classList.add("progress-step");
        step.id = "step-" + i;
        step.textContent = i + 1;
        progressSteps.appendChild(step);
      }
      updateProgress();
    }

    function updateProgress() {
      for (let i = 0; i < totalAds; i++) {
        const step = document.getElementById("step-" + i);
        if (i < currentAd) {
          step.classList.add("completed");
          step.classList.remove("active");
        } else if (i === currentAd) {
          step.classList.add("active");
        } else {
          step.classList.remove("completed", "active");
        }
      }
      completedCount.textContent = currentAd;
    }

    function loadAd() {
      // Clear previous ad
      adContent.innerHTML = '';
      
      // Load your ad script
      const adScript = document.createElement('script');
      adScript.type = 'text/javascript';
      adScript.innerHTML = `
        atOptions = {
          'key' : '8a1d6d42d6addf614a0b20c144270316',
          'format' : 'iframe',
          'height' : 250,
          'width' : 300,
          'params' : {}
        };
      `;
      adContent.appendChild(adScript);
      
      const invokeScript = document.createElement('script');
      invokeScript.type = 'text/javascript';
      invokeScript.src = '//innumerablemakeupreligious.com/8a1d6d42d6addf614a0b20c144270316/invoke.js';
      adContent.appendChild(invokeScript);
      
      adPlaceholder.style.display = "none";
    }

    function resetAdFrame() {
      adContent.innerHTML = '';
      adPlaceholder.style.display = "flex";
    }

    function startTimer() {
      secondsRemaining = adDuration;
      timerDisplay.textContent = secondsRemaining;
      isAdRunning = true;
      
      timer = setInterval(() => {
        secondsRemaining--;
        timerDisplay.textContent = secondsRemaining;
        
        if (secondsRemaining <= 0) {
          clearInterval(timer);
          isAdRunning = false;
          completeAd();
        }
      }, 1000);
    }

    function completeAd() {
      currentAd++;
      updateProgress();
      resetAdFrame();
      updateEstimatedTime();
      
      if (currentAd < totalAds) {
        watchAdBtn.disabled = false;
        watchAdBtn.textContent = `Watch Next Ad (${currentAd + 1}/${totalAds})`;
      } else {
        watchAdBtn.style.display = "none";
        timerDisplay.style.display = "none";
        adCompleteMessage.style.display = "block";
        
        // Redirect or unlock content after completion
        setTimeout(() => {
          // window.location.href = "https://innumerablemakeupreligious.com/hkum2zt0?key=4c7f61b1a32d08c6cd161087bfd02cbd";
        }, 2000);
      }
    }

    function updateEstimatedTime() {
      const remainingAds = totalAds - currentAd;
      const minutes = Math.ceil((remainingAds * adDuration) / 60);
      estimatedTime.textContent = `${minutes} minute${minutes !== 1 ? 's' : ''}`;
    }

    // Event Listeners
    watchAdBtn.addEventListener("click", () => {
      if (isAdRunning || currentAd >= totalAds) return;
      
      watchAdBtn.disabled = true;
      watchAdBtn.textContent = "Ad Playing...";
      loadAd();
      startTimer();
    });

    // Show the current ad number in the button initially
    watchAdBtn.textContent = `Watch Ad (1/${totalAds})`;
  </script>
</body>
</html>
